{"ast":null,"code":"import _classCallCheck from \"/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/src/containers/DeleteItemButton.js\";\nimport React, { Component } from 'react';\nimport { MenuItem, MessageDialog } from 'patternfly-react';\nimport { connect } from 'react-redux';\nimport { Route } from 'react-router-dom';\nimport { deleteApp } from '../actions/apps';\nimport { deleteBuildConfig } from '../actions/buildConfigs';\n\nvar DeleteItemButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DeleteItemButton, _Component);\n\n  function DeleteItemButton(props) {\n    var _this;\n\n    _classCallCheck(this, DeleteItemButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DeleteItemButton).call(this, props));\n\n    _this.triggerDeletion = function (history) {\n      var _this$props = _this.props,\n          onDelete = _this$props.onDelete,\n          navigate = _this$props.navigate;\n\n      if (onDelete && typeof onDelete === 'function') {\n        onDelete();\n      } else {\n        var _this$props2 = _this.props,\n            itemType = _this$props2.itemType,\n            itemName = _this$props2.itemName;\n\n        switch (itemType) {\n          case 'app':\n            _this.props.deleteApp(itemName);\n\n            break;\n\n          case 'buildconfig':\n            _this.props.deleteBuildConfig(itemName);\n\n            break;\n\n          default:\n            break;\n        }\n      } // This ensure hiding the dropdown menu when deletion was not successful\n      // See https://github.com/react-bootstrap/react-bootstrap/issues/541\n\n\n      document.dispatchEvent(new MouseEvent('click'));\n      navigate && history.replace(navigate);\n\n      _this.handleDialogClose();\n    };\n\n    _this.openDialog = function () {\n      _this.setState({\n        showModal: true\n      });\n    };\n\n    _this.handleDialogClose = function () {\n      _this.setState({\n        showModal: false\n      });\n    };\n\n    _this.state = {\n      showModal: false\n    };\n    return _this;\n  }\n\n  _createClass(DeleteItemButton, [{\n    key: \"getItemName\",\n    value: function getItemName() {\n      return this.props.item ? this.props.item.spec.name : this.props.itemName;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          itemType = _this$props3.itemType,\n          _this$props3$title = _this$props3.title,\n          title = _this$props3$title === void 0 ? 'Delete' : _this$props3$title;\n      var itemName = this.getItemName();\n      return React.createElement(Route, {\n        render: function render(props) {\n          return React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63\n            },\n            __self: this\n          }, React.createElement(MenuItem, {\n            onClick: _this2.openDialog,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          }, title), React.createElement(MessageDialog, {\n            show: _this2.state.showModal,\n            onHide: _this2.handleDialogClose,\n            primaryAction: function primaryAction() {\n              return _this2.triggerDeletion(props.history);\n            },\n            secondaryAction: _this2.handleDialogClose,\n            primaryActionButtonContent: \"Delete\",\n            secondaryActionButtonContent: \"Cancel\",\n            primaryActionButtonBsStyle: \"danger\",\n            title: \"Confirm Delete\",\n            secondaryContent: React.createElement(React.Fragment, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 75\n              },\n              __self: this\n            }, React.createElement(\"p\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 76\n              },\n              __self: this\n            }, \"Are you sure you want to delete the \".concat(itemType, \" '\"), React.createElement(\"b\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 78\n              },\n              __self: this\n            }, itemName), \"'?\"), React.createElement(\"p\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 81\n              },\n              __self: this\n            }, itemName, \" and its data will no longer be available. \", React.createElement(\"b\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 82\n              },\n              __self: this\n            }, \"It cannot be undone.\"), \" Make sure this is something you really want to do!\")),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return DeleteItemButton;\n}(Component);\n\nvar mapDispatchToProps = {\n  deleteApp: deleteApp,\n  deleteBuildConfig: deleteBuildConfig\n};\nexport default connect(null, mapDispatchToProps)(DeleteItemButton);","map":{"version":3,"sources":["/Users/weili/work/mobile-next/golang/src/github.com/aerogear/mobile-developer-console/src/containers/DeleteItemButton.js"],"names":["React","Component","MenuItem","MessageDialog","connect","Route","deleteApp","deleteBuildConfig","DeleteItemButton","props","triggerDeletion","history","onDelete","navigate","itemType","itemName","document","dispatchEvent","MouseEvent","replace","handleDialogClose","openDialog","setState","showModal","state","item","spec","name","title","getItemName","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { MenuItem, MessageDialog } from 'patternfly-react';\nimport { connect } from 'react-redux';\nimport { Route } from 'react-router-dom';\nimport { deleteApp } from '../actions/apps';\nimport { deleteBuildConfig } from '../actions/buildConfigs';\n\nclass DeleteItemButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false\n    };\n  }\n\n  triggerDeletion = history => {\n    const { onDelete, navigate } = this.props;\n    if (onDelete && typeof onDelete === 'function') {\n      onDelete();\n    } else {\n      const { itemType, itemName } = this.props;\n      switch (itemType) {\n        case 'app':\n          this.props.deleteApp(itemName);\n          break;\n        case 'buildconfig':\n          this.props.deleteBuildConfig(itemName);\n          break;\n        default:\n          break;\n      }\n    }\n    // This ensure hiding the dropdown menu when deletion was not successful\n    // See https://github.com/react-bootstrap/react-bootstrap/issues/541\n    document.dispatchEvent(new MouseEvent('click'));\n    navigate && history.replace(navigate);\n    this.handleDialogClose();\n  };\n\n  openDialog = () => {\n    this.setState({\n      showModal: true\n    });\n  };\n\n  handleDialogClose = () => {\n    this.setState({\n      showModal: false\n    });\n  };\n\n  getItemName() {\n    return this.props.item ? this.props.item.spec.name : this.props.itemName;\n  }\n\n  render() {\n    const { itemType, title = 'Delete' } = this.props;\n    const itemName = this.getItemName();\n\n    return (\n      <Route\n        render={props => (\n          <React.Fragment>\n            <MenuItem onClick={this.openDialog}>{title}</MenuItem>\n            <MessageDialog\n              show={this.state.showModal}\n              onHide={this.handleDialogClose}\n              primaryAction={() => this.triggerDeletion(props.history)}\n              secondaryAction={this.handleDialogClose}\n              primaryActionButtonContent=\"Delete\"\n              secondaryActionButtonContent=\"Cancel\"\n              primaryActionButtonBsStyle=\"danger\"\n              title=\"Confirm Delete\"\n              secondaryContent={\n                <React.Fragment>\n                  <p>\n                    {`Are you sure you want to delete the ${itemType} '`}\n                    <b>{itemName}</b>\n                    {`'?`}\n                  </p>\n                  <p>\n                    {itemName} and its data will no longer be available. <b>It cannot be undone.</b> Make sure this is\n                    something you really want to do!\n                  </p>\n                </React.Fragment>\n              }\n            />\n          </React.Fragment>\n        )}\n      />\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  deleteApp,\n  deleteBuildConfig\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(DeleteItemButton);\n"]},"metadata":{},"sourceType":"module"}